<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
(async () => {
  await liff.init({ liffId: "2008269284-N6VmQ2mb" });
  if (!liff.isLoggedIn()) return liff.login();

  const idToken = liff.getIDToken();
  const profile = await liff.getProfile();

  await fetch("/auth/line/verify", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ idToken, profile })
  });

  if (liff.isInClient()) liff.closeWindow();
})();
</script>
